import I from"react";var b=t=>Object.fromEntries(Object.entries(t).map(([r,e])=>r!=="i"&&e&&e!="0"&&[r,e]).filter(Boolean)),R=t=>Object.fromEntries(Object.keys(t).map(r=>{let e=t[r];return[r,Array.isArray(e)?e.map(s=>s==null?void 0:s.trim()):e===!!e?e:e==null?void 0:e.trim()]})),k=t=>{let[r="",...e]=t.split("|"),[s="",n]=r.split(":"),[a,o]=s.split("?");return{k:a,i:n,n:o==="",f:e}},S=(t,r)=>{let[e,s]=t.split(":");s||(s=e,e=r);let n=s.split("|"),[a,o,i,l,p,c]=n,T=n.filter(L=>L!==void 0).length;return T===1?{k:e,r:a}:T===2?{k:e,o:a,r:o}:T===3?{k:e,z:a,o,r:i}:{k:e,z:a,o,t:i,f:l,m:p,r:c}},u=/(\{(?:[^{}]+|\{(?:[^{}]+)*\})*\})/g,d=t=>t.substring(1,t.length-1),x=(t,r=!0,e="",s="")=>t.split(u).map(n=>{if(!n.match(u))return n;let a=d(n);if(a.startsWith("{"))return S(d(a),s);let o=k(a);return s=o.k||s,!e&&(e=s),o}).map(n=>{if(typeof n=="string")return n;n.k||(n.k=e||"0");let a=R(n);return r?b(a):a});var P=t=>!!(t.o||t.r),$=/^\{.*\}$/,C=(t,r,e)=>r.reduce((s,n)=>{var a,o;return(o=n.match($)?(()=>{var l;let i=Object.fromEntries(d(n).split(",").map(p=>p.split(":").map(c=>c.trim())));return(l=i[s])!=null?l:i["*"]})():(a=t[n])==null?void 0:a.call(t,s))!=null?o:s},e),w=(t,{z:r,o:e,t:s,f:n,m:a,r:o},i)=>{switch(r&&i==0?"zero":t.select(i)){case"zero":return r;case"one":return e;case"two":return s;case"few":return n;case"many":return a;default:return o}},j=/\?\?/g,h=(t,r,e,s)=>t.map(n=>{if(typeof n=="string")return n;let{k:a="0",f:o=[]}=n,i=s[a];if(P(n))return((typeof i=="boolean"?i?n.o:n.r:w(r,n,i))||"").replace(j,i);let l=o.length?C(e,o,i):i;return(""+(l!=null?l:"")).trim()}).join(""),y=(t,r,e,s)=>{let n=s[0],a=n&&typeof n=="object"&&n.constructor===Object,o=s.length===1&&a?n:s;return h(t,r,e,o)};var m=()=>new Proxy(Object.assign(()=>"",{}),{get:(t,r)=>r==="length"?0:m()});var f=(t,r)=>t[r]||(t[r]=x(r));var D=(t,r)=>{let e={},s=new Intl.PluralRules(t);return(n,...a)=>y(f(e,n),s,r,a)};function A(t,r,e={}){return B(r,D(t,e))}var F=(t={},r)=>typeof t=="string"?r.bind(null,t):Object.assign(Object.defineProperty(()=>"","name",{writable:!0}),t),B=(t,r)=>new Proxy(F(t,r),{get:(e,s)=>s===Symbol.iterator?[][Symbol.iterator].bind(Object.values(e).map(n=>F(n,r))):B(e[s],r)});var g=I,J=(t,r={})=>{let e=g.createContext({});return{component:n=>{let[a,o]=g.useState(null),[i,l]=g.useState(m()),p=T=>{o(T),l(()=>A(T,t[T],r[T]))};!a&&p(n.locale);let c={setLocale:p,locale:a,LL:i};return g.createElement(e.Provider,{value:c},n.children)},context:e}};export{J as initI18nReact};
