import{batch as D,createComponent as E,createContext as z,createSignal as B,useContext as O}from"solid-js";var b=t=>Object.fromEntries(Object.entries(t).map(([n,e])=>n!=="i"&&e&&e!="0"&&[n,e]).filter(Boolean)),S=t=>Object.fromEntries(Object.keys(t).map(n=>{let e=t[n];return[n,Array.isArray(e)?e.map(s=>s==null?void 0:s.trim()):e===!!e?e:e==null?void 0:e.trim()]})),k=t=>{let[n="",...e]=t.split("|"),[s="",r]=n.split(":"),[a,o]=s.split("?");return{k:a,i:r,n:o==="",f:e}},C=(t,n)=>{let[e,s]=t.split(":");s||(s=e,e=n);let r=s.split("|"),[a,o,i,l,c,p]=r,T=r.filter(L=>L!==void 0).length;return T===1?{k:e,r:a}:T===2?{k:e,o:a,r:o}:T===3?{k:e,z:a,o,r:i}:{k:e,z:a,o,t:i,f:l,m:c,r:p}},m=/(\{(?:[^{}]+|\{(?:[^{}]+)*\})*\})/g,d=t=>t.substring(1,t.length-1),u=(t,n=!0,e="",s="")=>t.split(m).map(r=>{if(!r.match(m))return r;let a=d(r);if(a.startsWith("{"))return C(d(a),s);let o=k(a);return s=o.k||s,!e&&(e=s),o}).map(r=>{if(typeof r=="string")return r;r.k||(r.k=e||"0");let a=S(r);return n?b(a):a});var x=t=>!!(t.o||t.r),R=/^\{.*\}$/,$=(t,n,e)=>n.reduce((s,r)=>{var a,o;return(o=r.match(R)?(()=>{var l;let i=Object.fromEntries(d(r).split(",").map(c=>c.split(":").map(p=>p.trim())));return(l=i[s])!=null?l:i["*"]})():(a=t[r])==null?void 0:a.call(t,s))!=null?o:s},e),w=(t,{z:n,o:e,t:s,f:r,m:a,r:o},i)=>{switch(n&&i==0?"zero":t.select(i)){case"zero":return n;case"one":return e;case"two":return s;case"few":return r;case"many":return a;default:return o}},j=/\?\?/g,I=(t,n,e,s)=>t.map(r=>{if(typeof r=="string")return r;let{k:a="0",f:o=[]}=r,i=s[a];if(x(r))return((typeof i=="boolean"?i?r.o:r.r:w(n,r,i))||"").replace(j,i);let l=o.length?$(e,o,i):i;return(""+(l!=null?l:"")).trim()}).join(""),g=(t,n,e,s)=>{let r=s[0],a=r&&typeof r=="object"&&r.constructor===Object,o=s.length===1&&a?r:s;return I(t,n,e,o)};var y=()=>new Proxy(Object.assign(()=>"",{}),{get:(t,n)=>n==="length"?0:y()});var P=(t,n)=>t[n]||(t[n]=u(n));var h=(t,n)=>{let e={},s=new Intl.PluralRules(t);return(r,...a)=>g(P(e,r),s,n,a)};function F(t,n,e={}){return A(n,h(t,e))}var f=(t={},n)=>typeof t=="string"?n.bind(null,t):Object.assign(Object.defineProperty(()=>"","name",{writable:!0}),t),A=(t,n)=>new Proxy(f(t,n),{get:(e,s)=>s===Symbol.iterator?[][Symbol.iterator].bind(Object.values(e).map(r=>f(r,n))):A(e[s],n)});var ne=(t,n={})=>{let e=z({});return{TypesafeI18n:a=>{let[o,i]=B(null),[l,c]=B(y()),p=T=>D(()=>{i(()=>T),c(()=>F(T,t[T],n[T]))});return p(a.locale),E(e.Provider,{value:{locale:o,LL:l,setLocale:p},get children(){return a.children}})},useI18nContext:()=>O(e)}};export{ne as initI18nSolid};
